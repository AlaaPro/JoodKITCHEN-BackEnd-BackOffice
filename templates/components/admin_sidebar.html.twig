<ul class="sidebar-nav simplebar-scrollable-y" data-coreui="navigation" data-simplebar="init"><div class="simplebar-wrapper" style="margin: -8px;"><div class="simplebar-height-auto-observer-wrapper"><div class="simplebar-height-auto-observer"></div></div><div class="simplebar-mask"><div class="simplebar-offset" style="right: 0px; bottom: 0px;"><div class="simplebar-content-wrapper" tabindex="0" role="region" aria-label="scrollable content" style="height: 100%; overflow: hidden scroll;"><div class="simplebar-content" style="padding: 8px;">
        <li class="nav-item"><a class="nav-link" href="{{ path('admin_dashboard') }}">
            <i class="nav-icon bi bi-speedometer2"></i> Dashboard<span class="badge badge-sm bg-info ms-auto">NEW</span></a></li>
        <li class="nav-item"><a class="nav-link" href="{{ path('admin_pos') }}">
            <i class="nav-icon bi bi-cash-stack"></i> Point de Vente<span class="badge badge-sm bg-success ms-auto">PRO</span></a></li>
        <li class="nav-title">Gestion</li>
        <li class="nav-group"><a class="nav-link nav-group-toggle" href="#">
            <i class="nav-icon bi bi-cart"></i> Commandes</a>
          <ul class="nav-group-items compact">
            <li class="nav-item"><a class="nav-link" href="{{ path('admin_orders') }}"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Toutes les commandes</a></li>
            <li class="nav-item"><a class="nav-link" href="{{ path('admin_kitchen') }}"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Cuisine</a></li>
            {# <li class="nav-item"><a class="nav-link" href="{{ path('admin_orders_tracking') }}"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Suivi livraisons</a></li> #}
          </ul>
        </li>
        <li class="nav-item"><a class="nav-link" href="{{ path('admin_abonnements') }}" id="abonnements-nav-link">
            <i class="nav-icon bi bi-calendar-check"></i> Abonnements
            <span class="badge badge-sm bg-warning ms-auto" id="pending-confirmations-badge" style="display: none;">0</span>
        </a></li>
        <li class="nav-group"><a class="nav-link nav-group-toggle" href="#">
            <i class="nav-icon bi bi-cup-hot"></i> Menu & Plats</a>
          <ul class="nav-group-items compact">
            <li class="nav-item"><a class="nav-link" href="{{ path('admin_plats') }}"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Plats</a></li>
            <li class="nav-item"><a class="nav-link" href="{{ path('admin_menus') }}"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Menus</a></li>
            <li class="nav-item"><a class="nav-link" href="{{ path('admin_categories') }}"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Cat√©gories</a></li>
          </ul>
        </li>
        <li class="nav-group"><a class="nav-link nav-group-toggle" href="#">
            <i class="nav-icon bi bi-people"></i> Utilisateurs</a>
          <ul class="nav-group-items compact">
            <li class="nav-item"><a class="nav-link" href="{{ path('admin_clients') }}"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Clients</a></li>
            <li class="nav-item"><a class="nav-link" href="{{ path('admin_staff') }}"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Personnel</a></li>
            <li class="nav-item"><a class="nav-link" href="{{ path('admin_admins') }}"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Administrateurs</a></li>
          </ul>
        </li>
        {# <li class="nav-item"><a class="nav-link" href="{{ path('admin_analytics') }}">
            <i class="nav-icon bi bi-bar-chart"></i> Analytics</a></li>
        <li class="nav-item"><a class="nav-link" href="{{ path('admin_subscriptions') }}">
            <i class="nav-icon bi bi-calendar-check"></i> Abonnements</a></li>
        <li class="nav-item"><a class="nav-link" href="{{ path('admin_notifications') }}">
            <i class="nav-icon bi bi-bell"></i> Notifications</a></li> #}
        <li class="nav-divider"></li>
        <li class="nav-title">Syst√®me</li>
        <li class="nav-item"><a class="nav-link" href="{{ path('admin_settings') }}">
            <i class="nav-icon bi bi-gear"></i> Param√®tres</a></li>
        <li class="nav-group"><a class="nav-link nav-group-toggle" href="#">
            <i class="nav-icon bi bi-server"></i> Syst√®me</a>
          <ul class="nav-group-items compact">
            <li class="nav-item"><a class="nav-link" href="{{ path('admin_system_logs') }}">
                <i class="nav-icon bi bi-file-text"></i> Monitoring</a></li>
            <li class="nav-item"><a class="nav-link" href="#">
                <i class="nav-icon bi bi-arrow-clockwise"></i> Cache</a></li>
            <li class="nav-item"><a class="nav-link" href="#">
                <i class="nav-icon bi bi-download"></i> Sauvegarde</a></li>
          </ul>
        </li>
      </div></div></div></div><div class="simplebar-placeholder" style="width: 255px; height: 823px;"></div></div><div class="simplebar-track simplebar-horizontal" style="visibility: hidden;"><div class="simplebar-scrollbar" style="width: 0px; display: none;"></div></div><div class="simplebar-track simplebar-vertical" style="visibility: visible;"><div class="simplebar-scrollbar" style="height: 410px; transform: translate3d(0px, 0px, 0px); display: block;"></div></div></ul>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Update pending confirmations badge
    updatePendingConfirmationsBadge();
    
    // Refresh badge every 30 seconds for real-time updates
    setInterval(updatePendingConfirmationsBadge, 30000);
});

async function updatePendingConfirmationsBadge() {
    try {
        // When AbonnementAPI is implemented, this will fetch real data
        // For now, we'll prepare the structure
        const badge = document.getElementById('pending-confirmations-badge');
        if (!badge) return;
        
        // TODO: Replace with actual API call when AbonnementController is implemented
        // const response = await AdminAPI.get('/abonnements/pending-count');
        // const pendingCount = response.data.count;
        
        // Placeholder for now - will be updated when API is ready
        const pendingCount = 0;
        
        if (pendingCount > 0) {
            badge.textContent = pendingCount;
            badge.style.display = 'inline-block';
            badge.setAttribute('title', `${pendingCount} abonnement(s) en attente de confirmation`);
        } else {
            badge.style.display = 'none';
        }
        
        console.log('üìä Abonnements badge updated:', pendingCount);
    } catch (error) {
        console.error('Error updating pending confirmations badge:', error);
    }
}

// Make function globally accessible for manual updates
window.updatePendingConfirmationsBadge = updatePendingConfirmationsBadge;
</script>