{% extends 'emails/base.html.twig' %}

{% block email_title %}Confirmation de commande - JoodKitchen{% endblock %}

{% block email_content %}
    <h2>ğŸ‰ Merci pour votre commande !</h2>
    
    <p>Bonjour {% if order.client_name %}{{ order.client_name }}{% else %}cher client{% endif %},</p>
    
    <p>Nous avons bien reÃ§u votre commande et nous vous remercions de votre confiance. Voici les dÃ©tails de votre commande :</p>
    
    <div class="highlight-box">
        <p><strong>ğŸ“‹ NumÃ©ro de commande :</strong> {{ order.numero|default('CMD-' ~ order.id) }}</p>
        <p><strong>ğŸ“… Date de commande :</strong> {{ order.date_commande|date('d/m/Y Ã  H:i') }}</p>
        <p><strong>ğŸšš Type de service :</strong> 
            {% if order.type_livraison == 'livraison' %}
                Livraison Ã  domicile
            {% elseif order.type_livraison == 'a_emporter' %}
                Ã€ emporter
            {% else %}
                Sur place
            {% endif %}
        </p>
        {% if order.adresse_livraison is defined and order.adresse_livraison %}
            <p><strong>ğŸ“ Adresse :</strong> {{ order.adresse_livraison }}</p>
        {% endif %}
    </div>
    
    <h3>ğŸ½ï¸ DÃ©tails de votre commande</h3>
    
    {% if order.articles is defined and order.articles|length > 0 %}
        {% for article in order.articles %}
            <div style="border-bottom: 1px solid #eee; padding: 10px 0;">
                <p style="margin-bottom: 5px;">
                    <strong>{{ article.nom }}</strong>
                    {% if article.type == 'menu' %}
                        {% if article.cuisine_type == 'marocain' %}ğŸ‡²ğŸ‡¦
                        {% elseif article.cuisine_type == 'italien' %}ğŸ‡®ğŸ‡¹
                        {% else %}ğŸŒ{% endif %}
                    {% endif %}
                </p>
                {% if article.description is defined and article.description %}
                    <p style="font-size: 14px; color: #666; margin-bottom: 5px;">{{ article.description }}</p>
                {% endif %}
                <p style="margin: 0;">
                    QuantitÃ©: {{ article.quantite }} Ã— {{ article.prix_unitaire }}â‚¬ = 
                    <strong>{{ (article.quantite * article.prix_unitaire)|number_format(2, ',', ' ') }}â‚¬</strong>
                </p>
                {% if article.commentaire is defined and article.commentaire %}
                    <p style="font-size: 13px; color: #a9b73e; margin: 5px 0 0 0;">
                        ğŸ’¬ {{ article.commentaire }}
                    </p>
                {% endif %}
            </div>
        {% endfor %}
    {% endif %}
    
    <div style="background-color: #f8f9fa; padding: 15px; margin: 20px 0; border-radius: 5px;">
        {% if order.total_avant_reduction and order.total_avant_reduction != order.total %}
            <p style="margin: 5px 0;">Sous-total: {{ order.total_avant_reduction|number_format(2, ',', ' ') }}â‚¬</p>
            <p style="margin: 5px 0; color: #dc3545;">RÃ©duction: -{{ (order.total_avant_reduction - order.total)|number_format(2, ',', ' ') }}â‚¬</p>
        {% endif %}
        <p style="margin: 5px 0; font-size: 18px; font-weight: bold; color: #a9b73e;">
            ğŸ’° Total: {{ order.total|number_format(2, ',', ' ') }}â‚¬
        </p>
    </div>
    
    {% if order.statut == 'en_attente' %}
        <div class="highlight-box">
            <p><strong>â³ Statut actuel :</strong> En attente de confirmation</p>
            <p>Nous prÃ©parons votre commande avec soin. Vous recevrez une notification dÃ¨s que votre commande sera prÃªte !</p>
        </div>
    {% endif %}
    
    {% if order.commentaire is defined and order.commentaire %}
        <p><strong>ğŸ’¬ Vos instructions :</strong><br>
        <em>{{ order.commentaire }}</em></p>
    {% endif %}
    
    <div style="text-align: center; margin: 30px 0;">
        <a href="#" class="button">ğŸ“± Suivre ma commande</a>
    </div>
    
    <p>Si vous avez des questions concernant votre commande, n'hÃ©sitez pas Ã  nous contacter.</p>
    
    <p>Merci encore pour votre confiance et bon appÃ©tit ! ğŸ½ï¸</p>
    
    <p style="color: #666; font-size: 14px;">
        <em>L'Ã©quipe JoodKitchen</em>
    </p>
{% endblock %} 